<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ready To Mortgage - Solicitud de preaprobaci贸n</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        /* Pre-Approval Form Specific Styles */
        .pre-approval-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #1E4E8C 0%, #2563EB 100%);
            position: relative;
            overflow: hidden;
        }

        .security-badge {
            position: absolute;
            top: 2rem;
            left: 2rem;
            z-index: 10;
        }

        .security-badge img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #FFD700;
            padding: 10px;
        }

        .language-switch {
            position: absolute;
            top: 2rem;
            right: 2rem;
            z-index: 10;
        }

        .btn-language-switch {
            padding: 0.75rem 1.5rem;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-language-switch:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .form-wizard {
            display: flex;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .form-slide {
            display: none;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            color: white;
        }

        .form-slide.active {
            display: block;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .form-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .form-subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .question-counter {
            font-size: 1rem;
            margin-bottom: 3rem;
            opacity: 0.8;
        }

        .form-content {
            background: white;
            border-radius: 20px;
            padding: 3rem 2rem;
            margin: 2rem 0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            color: #333;
            width: 100%;
            box-sizing: border-box;
        }

        .form-group {
            margin-bottom: 2rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .required {
            color: #dc3545;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #1E4E8C;
            box-shadow: 0 0 0 3px rgba(30, 78, 140, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-sizing: border-box;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 1rem center;
            background-repeat: no-repeat;
            background-size: 1rem;
            padding-right: 3rem;
        }

        .form-select:focus {
            outline: none;
            border-color: #1E4E8C;
            box-shadow: 0 0 0 3px rgba(30, 78, 140, 0.1);
        }

        .helper-text {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }

        .error-message {
            background: #dc3545;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            font-size: 0.9rem;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Address Grid Styles */
        .address-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .address-grid .form-input:first-child {
            grid-column: 1 / -1;
        }

        .address-grid-full {
            grid-column: 1 / -1;
        }

        /* Yes/No Button Styles */
        .yes-no-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .btn-choice {
            padding: 1rem 3rem;
            border: 3px solid #FFFFFF;
            border-radius: 12px;
            background: #FFFFFF;
            color: #1E4E8C;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn-choice:hover {
            background: #F8F9FA;
            border-color: #1E4E8C;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }

        .btn-choice.selected {
            background: #1E4E8C;
            border-color: #1E4E8C;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(30,78,140,0.4);
        }

        /* Remove the specific red styling for 'no' buttons */

        /* Retirement Income Grid Styles */
        .retirement-income-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .income-field {
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .income-field .form-input {
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            background: white;
            color: #1E4E8C;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
        }

        .income-field .form-input:focus {
            border-color: #1E4E8C;
            outline: none;
            box-shadow: 0 0 0 3px rgba(30,78,140,0.1);
        }

        .field-label {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #6b7280;
            text-align: center;
            font-weight: 500;
        }

        /* Select Dropdown Styles */
        .select-container {
            position: relative;
            margin: 2rem 0;
        }

        .form-select {
            width: 100%;
            padding: 1rem 3rem 1rem 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            background: white;
            color: #1E4E8C;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 1rem center;
            background-repeat: no-repeat;
            background-size: 1rem;
        }

        .form-select:focus {
            border-color: #1E4E8C;
            outline: none;
            box-shadow: 0 0 0 3px rgba(30,78,140,0.1);
        }

        .select-helper {
            position: absolute;
            top: -0.5rem;
            left: 1rem;
            background: white;
            padding: 0 0.5rem;
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 500;
            pointer-events: none;
        }

        /* Credit Check Styles */
        .credit-check-notice {
            background: #f3f4f6;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
        }

        .credit-check-notice p {
            margin: 0;
            font-size: 0.9rem;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .credit-authorization-container {
            margin: 2rem 0;
            width: 100%;
        }

        .radio-option {
            display: flex;
            align-items: flex-start;
            margin: 1rem 0;
            width: 100%;
            gap: 1rem;
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin: 0;
            margin-top: 0.5rem;
            flex-shrink: 0;
            accent-color: #1E4E8C;
            cursor: pointer;
        }

        .radio-label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95rem;
            line-height: 1.6;
            color: #374151;
            padding: 1rem;
            background: #e5f3ff;
            border: 2px solid #bfdbfe;
            border-radius: 10px;
            text-align: left;
        }

        .radio-button {
            display: none;
        }

        .radio-text {
            display: block;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* Checkbox Styles */
        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .checkbox-item:hover {
            border-color: #1E4E8C;
            background: #f8f9fa;
        }

        .checkbox-item.selected {
            border-color: #1E4E8C;
            background: #e3f2fd;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 18px;
            height: 18px;
            accent-color: #1E4E8C;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 500;
        }

        .checkbox-single {
            grid-column: 1 / -1;
        }

        .form-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .btn-nav {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: #1E4E8C;
            color: white;
        }

        .btn-primary:hover {
            background: #2563EB;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 78, 140, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.5);
        }

        /* Signature Pad Styles */
        .signature-container {
            margin: 2rem 0;
            text-align: center;
        }

        .signature-pad {
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            background: white;
            width: 100%;
            height: 200px;
            cursor: crosshair;
            touch-action: none;
        }

        .signature-pad:focus {
            outline: none;
            border-color: #1E4E8C;
            box-shadow: 0 0 0 3px rgba(30, 78, 140, 0.1);
        }

        .signature-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-signature {
            padding: 0.75rem 1.5rem;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            background: white;
            color: #6b7280;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-signature:hover {
            border-color: #1E4E8C;
            color: #1E4E8C;
        }

        .signature-helper {
            font-size: 0.85rem;
            color: #6b7280;
            margin-bottom: 1rem;
            font-style: italic;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-content {
                padding: 2rem 1.5rem;
                margin: 1rem 0;
            }

            .form-title {
                font-size: 2rem;
            }

            .security-badge {
                top: 1rem;
                left: 1rem;
            }

            .security-badge img {
                width: 60px;
                height: 60px;
            }

            .language-switch {
                top: 1rem;
                right: 1rem;
            }

            .btn-language-switch {
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }

            .radio-label {
                font-size: 0.85rem;
                padding: 1rem;
            }

            .radio-option input[type="radio"] {
                width: 18px;
                height: 18px;
            }

            .signature-pad {
                height: 150px;
            }

            .signature-controls {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Start Screen Specific */
        .start-screen {
            text-align: center;
        }

        .start-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .start-subtitle {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .start-description {
            font-size: 1rem;
            margin-bottom: 3rem;
            opacity: 0.8;
        }

        .btn-start {
            padding: 1.2rem 3rem;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .btn-start:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .btn-start svg {
            margin-left: 10px;
            transition: transform 0.3s ease;
        }

        .btn-start:hover svg {
            transform: translateX(5px);
        }
    </style>
</head>
<body>
    <div class="pre-approval-container">
        <!-- Security Badge -->
        <div class="security-badge">
            <img src="assets/img/CRP.png" alt="SSL Security Guarantee">
        </div>

        <!-- Language Switch -->
        <div class="language-switch">
            <a href="pre-approval.html" class="btn-language-switch">
                吼 ENGLISH
            </a>
        </div>

        <!-- Form Wizard -->
        <div class="form-wizard">
            <!-- Start Screen -->
            <div class="form-slide active" id="slide-start">
                <div class="start-screen">
                    <h1 class="start-title">2025 SOLICITUD 1003 ONLINE - SONIA</h1>
                    <p class="start-subtitle">English form on the right</p>
                    <p class="start-description">24 Preguntas</p>
                    
                    <button type="button" class="btn-start" onclick="startForm()">
                        INICIAR
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 1: Borrower Name -->
            <div class="form-slide" id="slide-1">
                <div class="form-content">
                    <div class="form-group">
                        <label for="borrowerName">Nombre del solicitante <span class="required">*</span></label>
                        <input type="text" id="borrowerName" name="borrowerName" class="form-input" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-1">
                    Hay campos obligatorios incompletos. Por favor, compl茅telos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 2: Contact Information -->
            <div class="form-slide" id="slide-2">
                <div class="form-content">
                    <div class="form-group">
                        <label for="contactInfo">Informaci贸n de contacto del solicitante <span class="required">*</span></label>
                        <input type="tel" id="mobilePhone" name="mobilePhone" class="form-input" placeholder="Tel茅fono m贸vil" required style="margin-bottom: 1rem;">
                        <input type="email" id="emailAddress" name="emailAddress" class="form-input" placeholder="Direcci贸n de correo electr贸nico" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-2">
                    Hay campos obligatorios incompletos. Por favor, compl茅telos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 3: Borrower Loan Information -->
            <div class="form-slide" id="slide-3">
                <div class="form-content">
                    <div class="form-group">
                        <label for="loanInfo">Informaci贸n del pr茅stamo del solicitante <span class="required">*</span></label>

                        <div style="margin-bottom: 1rem;">
                            <div class="helper-text">驴Qui茅n est谩 solicitando este pr茅stamo?</div>
                            <select id="whoApplying" name="whoApplying" class="form-select" required>
                                <option value="">Seleccionar</option>
                                <option value="individually">Solicitando individualmente</option>
                                <option value="spouse">Solicitando conjuntamente con el c贸nyuge</option>
                                <option value="another">Solicitando conjuntamente con otra persona</option>
                                <option value="multiple">M谩s de 2 personas solicitando este pr茅stamo</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <div class="helper-text">Descripci贸n de la propiedad</div>
                            <select id="propertyDescription" name="propertyDescription" class="form-select" required>
                                <option value="">Seleccionar</option>
                                <option value="single-family">Unifamiliar</option>
                                <option value="multi-family">Multifamiliar</option>
                                <option value="condominium">Condominio</option>
                                <option value="mixed">Propiedad Mixta</option>
                                <option value="commercial">Propiedad Comercial</option>
                                <option value="mobile">M贸vil/Manufacturada</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 1rem;">
                            <div class="helper-text">Prop贸sito del Pr茅stamo</div>
                            <select id="loanPurpose" name="loanPurpose" class="form-select" required>
                                <option value="">Seleccionar</option>
                                <option value="purchase">Compra - Estoy comprando una propiedad y tengo un contrato aceptado con un vendedor.</option>
                                <option value="pre-qualification">Pre-calificaci贸n - Estoy buscando una propiedad y no tengo un contrato aceptado con un vendedor.</option>
                                <option value="refinance-balance">Refinanciar Saldo Existente - Me gustar铆a refinanciar el saldo hipotecario existente de mi propiedad.</option>
                                <option value="refinance-cash">Refinanciar para Obtener Efectivo - Me gustar铆a refinanciar mi propiedad y obtener efectivo en el cierre.</option>
                            </select>
                        </div>

                        <div>
                            <div class="helper-text">Monto del Pr茅stamo Solicitado</div>
                            <select id="loanAmount" name="loanAmount" class="form-select" required>
                                <option value="">Seleccionar</option>
                                <option value="100000">100,000</option>
                                <option value="110000">110,000</option>
                                <option value="120000">120,000</option>
                                <option value="135000">135,000</option>
                                <option value="145000">145,000</option>
                                <option value="150000">150,000</option>
                                <option value="160000">160,000</option>
                                <option value="175000">175,000</option>
                                <option value="200000">200,000</option>
                                <option value="225000">225,000</option>
                                <option value="250000">250,000</option>
                                <option value="275000">275,000</option>
                                <option value="300000">300,000</option>
                                <option value="375000">375,000</option>
                                <option value="400000">400,000</option>
                                <option value="475000">475,000</option>
                                <option value="500000">500,000</option>
                                <option value="525000">525,000</option>
                                <option value="600000">600,000</option>
                                <option value="650000">650,000</option>
                                <option value="700000">700,000</option>
                                <option value="750000">750,000</option>
                                <option value="800000">800,000</option>
                                <option value="850000">850,000</option>
                                <option value="900000">900,000</option>
                                <option value="1000000">1,000,000</option>
                                <option value="1500000">1,500,000</option>
                                <option value="2000000">2,000,000</option>
                                <option value="2500000">2,500,000</option>
                                <option value="3000000">3,000,000</option>
                                <option value="above3mil">ABOVE 3 MIL</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-3">
                    Hay campos obligatorios incompletos. Por favor, compl茅telos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 4: Primary Borrower Date of Birth -->
            <div class="form-slide" id="slide-4">
                <div class="form-content">
                    <div class="form-group">
                        <label for="dateOfBirth">Fecha de Nacimiento del Solicitante Principal <span class="required">*</span></label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" class="form-input" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-4">
                   Hay campos obligatorios incompletos. Por favor, compl茅telos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 5: Primary Borrower Social Security # -->
            <div class="form-slide" id="slide-5">
                <div class="form-content">
                    <div class="form-group">
                        <label for="socialSecurity">N煤mero de Seguro Social del Solicitante Principal</label>
                        <div class="helper-text">Prestatario con ITIN: reemplace el n煤mero de seguro social con el n煤mero de identificaci贸n fiscal del ITIN</div>
                        <input type="text" id="socialSecurity" name="socialSecurity" class="form-input" placeholder="XXX-XX-XXXX">
                    </div>
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 6: Marital Status -->
            <div class="form-slide" id="slide-6">
                <div class="form-content">
                    <div class="form-group">
                        <label for="maritalStatus">Estado Civil <span class="required">*</span></label>
                        <select id="maritalStatus" name="maritalStatus" class="form-select" required>
                            <option value="">Por favor seleccione</option>
                            <option value="single">Soltero</option>
                            <option value="married">Casado</option>
                            <option value="divorced">Divorciado</option>
                            <option value="divorced-alimony">Divorciado con Pensi贸n Alimenticia</option>
                            <option value="divorced-alimony-child">Divorciado con Pensi贸n Alimenticia y Manutenci贸n Infantil</option>
                        </select>
                    </div>
                </div>
                
                <div class="error-message" id="error-6">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 7: Dependents -->
            <div class="form-slide" id="slide-7">
                <div class="form-content">
                    <div class="form-group">
                        <label for="dependents">Dependientes (opcional)</label>
                        <select id="dependents" name="dependents" class="form-select">
                            <option value="">Por favor seleccione</option>
                            <option value="children">Ni帽os</option>
                            <option value="non-custodial">No Custodial</option>
                            <option value="parents">Padres</option>
                            <option value="direct-family">Familia Directa</option>
                            <option value="distant-relatives">Parientes Lejanos</option>
                            <option value="none">Ninguno de los anteriores</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 8: Your Current Property Address -->
            <div class="form-slide" id="slide-8">
                <div class="form-content">
                    <div class="form-group">
                        <label for="currentAddress">Tu Direcci贸n Actual de Propiedad <span class="required">*</span></label>

                        <div class="address-grid">
                            <input type="text" id="streetAddress" name="streetAddress" class="form-input" placeholder="Direcci贸n" required>
                            <input type="text" id="streetAddress2" name="streetAddress2" class="form-input" placeholder="L铆nea de Direcci贸n 2">
                            <input type="text" id="city" name="city" class="form-input" placeholder="Ciudad" required>
                            <input type="text" id="stateProvince" name="stateProvince" class="form-input" placeholder="Estado / Provincia" required>
                            <input type="text" id="postalCode" name="postalCode" class="form-input" placeholder="C贸digo Postal" required>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-8">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 9: Have you lived at that address for more than two years? -->
            <div class="form-slide" id="slide-9">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Has vivido en esa direcci贸n durante m谩s de dos a帽os? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'livedTwoYears')">S</button>
                            <button type="button" class="btn-choice no" data-value="no" onclick="selectYesNo(this, 'livedTwoYears')">NO</button>
                        </div>
                        <input type="hidden" id="livedTwoYears" name="livedTwoYears" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-9">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 10: Borrower Mortgage Event History -->
            <div class="form-slide" id="slide-10">
                <div class="form-content">
                    <div class="form-group">
                        <label>Historial de Eventos Hipotecarios del Prestatario <span class="required">*</span></label>
                        <div class="helper-text">En los 煤ltimos 7 a帽os</div>

                        <div class="checkbox-group">
                            <div class="checkbox-item" onclick="toggleCheckbox(this, 'bankruptcy')">
                                <input type="checkbox" id="bankruptcy" name="mortgageHistory" value="bankruptcy">
                                <label for="bankruptcy">Bancarrota</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this, 'foreclosure')">
                                <input type="checkbox" id="foreclosure" name="mortgageHistory" value="foreclosure">
                                <label for="foreclosure">Ejecutivo Hipotecario</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this, 'shortSale')">
                                <input type="checkbox" id="shortSale" name="mortgageHistory" value="shortSale">
                                <label for="shortSale">Venta Corta</label>
                            </div>
                            <div class="checkbox-item selected" onclick="toggleCheckbox(this, 'deedInLieu')">
                                <input type="checkbox" id="deedInLieu" name="mortgageHistory" value="deedInLieu" checked>
                                <label for="deedInLieu">Escritura en lugar de ejecuci贸n hipotecaria</label>
                            </div>
                            <div class="checkbox-item checkbox-single" onclick="toggleCheckbox(this, 'noneAbove')">
                                <input type="checkbox" id="noneAbove" name="mortgageHistory" value="noneAbove">
                                <label for="noneAbove">NINGUNO DE LOS ANTERIORES</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 11: Is the Primary Borrower Retired? -->
            <div class="form-slide" id="slide-11">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Est谩 jubilado el prestatario principal?</label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'isRetired')">S</button>
                            <button type="button" class="btn-choice no" data-value="no" onclick="selectYesNo(this, 'isRetired')">NO</button>
                        </div>
                        <input type="hidden" id="isRetired" name="isRetired">
                    </div>
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 12: Borrower primary source of income? -->
            <div class="form-slide" id="slide-12">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Cu谩l es la fuente principal de ingresos del prestatario? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="w2" onclick="selectYesNo(this, 'incomeSource')">Asalariado W-2</button>
                            <button type="button" class="btn-choice" data-value="self-employed" onclick="selectYesNo(this, 'incomeSource')">Trabajador Aut贸nomo</button>
                        </div>
                        <input type="hidden" id="incomeSource" name="incomeSource" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-12">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 13: List Retirement Income for Primary Borrower -->
            <div class="form-slide" id="slide-13">
                <div class="form-content">
                    <div class="form-group">
                        <label>Lista de ingresos por jubilaci贸n para el prestatario principal</label>

                        <div class="retirement-income-grid">
                            <div class="income-field">
                                <input type="number" id="socialSecurityIncome" name="socialSecurityIncome" class="form-input" placeholder="0">
                                <label for="socialSecurityIncome" class="field-label">Ingresos de Seguridad Social</label>
                            </div>
                            
                            <div class="income-field">
                                <input type="number" id="disabilityIncome" name="disabilityIncome" class="form-input" placeholder="0">
                                <label for="disabilityIncome" class="field-label">Ingresos por Discapacidad</label>
                            </div>
                            
                            <div class="income-field">
                                <input type="number" id="annuitiesPensions" name="annuitiesPensions" class="form-input" placeholder="0">
                                <label for="annuitiesPensions" class="field-label">Anualidades y Pensiones</label>
                            </div>
                            
                            <div class="income-field">
                                <input type="number" id="thirdPartyIncome" name="thirdPartyIncome" class="form-input" placeholder="0">
                                <label for="thirdPartyIncome" class="field-label">Ingresos de Terceros</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-13">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 14: Is there a Co-Borrower? -->
            <div class="form-slide" id="slide-14">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Hay un co-prestatario? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'coBorrower')">SI</button>
                            <button type="button" class="btn-choice" data-value="no" onclick="selectYesNo(this, 'coBorrower')">NO</button>
                        </div>
                        <input type="hidden" id="coBorrower" name="coBorrower" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-14">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 15: Are you a US Citizen? -->
            <div class="form-slide" id="slide-15">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Es usted ciudadano de EE. UU.? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'usCitizen')">SI</button>
                            <button type="button" class="btn-choice" data-value="no" onclick="selectYesNo(this, 'usCitizen')">NO</button>
                        </div>
                        <input type="hidden" id="usCitizen" name="usCitizen" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-15">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 16: Are there any outstanding judgements against you? -->
            <div class="form-slide" id="slide-16">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Hay alg煤n juicio pendiente en su contra? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="no" onclick="selectYesNo(this, 'outstandingJudgements')">NO</button>
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'outstandingJudgements')">SI</button>
                        </div>
                        <input type="hidden" id="outstandingJudgements" name="outstandingJudgements" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-16">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 17: Are you a party to an active lawsuit? -->
            <div class="form-slide" id="slide-17">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Es usted parte de un juicio activo? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="no" onclick="selectYesNo(this, 'activeLawsuit')">NO</button>
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'activeLawsuit')">SI</button>
                        </div>
                        <input type="hidden" id="activeLawsuit" name="activeLawsuit" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-17">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 18: Do you have an active IRS tax Lien? -->
            <div class="form-slide" id="slide-18">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Tiene un gravamen fiscal activo del IRS? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="no" onclick="selectYesNo(this, 'irsTaxLien')">NO</button>
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'irsTaxLien')">SI</button>
                        </div>
                        <input type="hidden" id="irsTaxLien" name="irsTaxLien" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-18">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 19: Do you have any deferred Student Loans? -->
            <div class="form-slide" id="slide-19">
                <div class="form-content">
                    <div class="form-group">
                        <label>驴Tiene alg煤n pr茅stamo estudiantil en espera? <span class="required">*</span></label>

                        <div class="yes-no-buttons">
                            <button type="button" class="btn-choice" data-value="no" onclick="selectYesNo(this, 'deferredStudentLoans')">NO</button>
                            <button type="button" class="btn-choice" data-value="yes" onclick="selectYesNo(this, 'deferredStudentLoans')">SI</button>
                        </div>
                        <input type="hidden" id="deferredStudentLoans" name="deferredStudentLoans" value="" required>
                    </div>
                </div>
                
                <div class="error-message" id="error-19">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 20: How did you hear about us? -->
            <div class="form-slide" id="slide-20">
                <div class="form-content">
                    <div class="form-group">
                        <label for="hearAboutUs">驴C贸mo se enter贸 de nosotros? <span class="required">*</span></label>

                        <div class="select-container">
                            <select id="hearAboutUs" name="hearAboutUs" class="form-select" required>
                                <option value="">Seleccione</option>
                                <option value="google-review">Rese帽a de Google</option>
                                <option value="website">Nuestro sitio web</option>
                                <option value="online-ad">Anuncio en l铆nea</option>
                                <option value="email-flyer">Folleto por correo electr贸nico</option>
                                <option value="zillow">Zillow</option>
                                <option value="better-business-bureau">Better Business Bureau</option>
                                <option value="marketing-brochure">Folleto de marketing</option>
                                <option value="realtor-referral">Referencia de agente inmobiliario</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-20">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 21: Credit Check -->
            <div class="form-slide" id="slide-21">
                <div class="form-content">
                    <div class="form-group">
                        <label>Verificaci贸n de Cr茅dito <span class="required">*</span></label>

                        <div class="credit-check-notice">
                            <p></p>隆NO PULLAMOS SU CRDITO AUTOMTICAMENTE AL MARCAR ESTA CASILLA! PRIMERO REVISAMOS SUS FINANZAS Y LO LLAMAMOS PARA OBTENER SU AUTORIZACIN VERBAL!</p>
                        </div>
                        
                        <div class="credit-authorization-container">
                            <div class="radio-option">
                                <input type="radio" id="creditAuthorization" name="creditAuthorization" value="authorized" required>
                                <label for="creditAuthorization" class="radio-label">
                                    <span class="radio-text">El Prestatario y el Co-Prestatario (si los hay) otorgan permiso a Ready To Mortgage para obtener toda la informaci贸n que se considere necesaria para procesar su solicitud de pr茅stamo hipotecario. Esta informaci贸n incluye, entre otros, su estado laboral pasado y presente, sus cuentas de dep贸sito, su historial de cr茅dito al consumidor pasado y presente, su historial hipotecario y/o su historial de alquiler. Ready To Mortgage se compromete a obtener su permiso y consentimiento verbal antes de consultar su cr茅dito cuando sea necesario.</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-21">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 22: Patriot Act -->
            <div class="form-slide" id="slide-22">
                <div class="form-content">
                    <div class="form-group">
                        <label>Acto Patriota<span class="required">*</span></label>
                        
                        <div class="credit-authorization-container">
                            <div class="radio-option">
                                <input type="radio" id="patriotAct" name="patriotAct" value="acknowledged" required>
                                <label for="patriotAct" class="radio-label">
                                    <span class="radio-text">El Prestatario y el Coprestatario (si lo hubiera) reconocen y aceptan que, para ayudar al gobierno a combatir el financiamiento del terrorismo y el lavado de dinero, la ley federal exige que todas las instituciones financieras obtengan, verifiquen y registren la informaci贸n que identifica a cada persona que abre una cuenta. Esto significa que, al solicitar su pr茅stamo hipotecario, le solicitaremos su nombre, direcci贸n, fecha de nacimiento y otra informaci贸n que nos permita identificarlo. Tambi茅n podr铆amos solicitarle su licencia de conducir u otros documentos de identificaci贸n.</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-22">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 23: Electronic Disclosure -->
            <div class="form-slide" id="slide-23">
                <div class="form-content">
                    <div class="form-group">
                        <label>Divulgaci贸n Electr贸nica <span class="required">*</span></label>

                        <div class="credit-authorization-container">
                            <div class="radio-option">
                                <input type="radio" id="electronicDisclosure" name="electronicDisclosure" value="acknowledged" required>
                                <label for="electronicDisclosure" class="radio-label">
                                    <span class="radio-text">El Prestatario y el Coprestatario (si lo hubiera) reconocen y aceptan que, al solicitar un pr茅stamo en l铆nea, aceptan recibir todas las divulgaciones aplicables asociadas con esta transacci贸n en forma electr贸nica, incluidas las divulgaciones requeridas por la Ley de Verdad en los Pr茅stamos, la Ley de Procedimientos de Liquidaci贸n de Bienes Ra铆ces y la Ley de Igualdad de Oportunidades de Cr茅dito. Se proporcionar谩n copias en papel para ciertos contratos y transacciones relacionados con bienes ra铆ces despu茅s de que se reciba su solicitud de pr茅stamo, incluidas, entre otras, copias de cualquier evento hipotecario, como ejecuciones hipotecarias, ventas cortas y quiebras que afecten su capacidad para obtener un pr茅stamo.</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-23">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="nextSlide()">
                        SIGUIENTE
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Question 24: Signature Required -->
            <div class="form-slide" id="slide-24">
                <div class="form-content">
                    <div class="form-group">
                        <label>Firma Requerida <span class="required">*</span></label>
                        <div class="signature-helper">Puede firmar usando su mouse, puntero o dedo en la pantalla t谩ctil de cualquier tel茅fono m贸vil</div>

                        <div class="signature-container">
                            <canvas id="signaturePad" class="signature-pad" width="600" height="200"></canvas>
                            <div class="signature-controls">
                                <button type="button" class="btn-signature" onclick="clearSignature()">LIMPIAR</button>
                            </div>
                        </div>

                        <div class="checkbox-item" style="margin-top: 2rem;">
                            <input type="checkbox" id="finalAcknowledgement" name="finalAcknowledgement" value="acknowledged" required>
                            <label for="finalAcknowledgement">Al marcar la casilla anterior y enviar el formulario. Yo/nosotros aceptamos los t茅rminos y condiciones establecidos a continuaci贸n</label>
                        </div>
                        
                        <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; font-size: 0.9rem; color: #6b7280;">
                            <strong>TRMINOS Y CONDICIONES:</strong> Al marcar la casilla anterior y enviar este formulario. Yo/nosotros consiento y acepto que toda mi informaci贸n publicada en este formulario de solicitud es verdadera, correcta y se est谩 proporcionando a Ready To Mortgage para una pre-calificaci贸n de pr茅stamo. Yo/nosotros adem谩s reconozco y acepto que yo/nosotros hemos le铆do y los t茅rminos y condiciones proporcionados en las secciones de Verificaci贸n de Cr茅dito, Ley Patriota y Divulgaci贸n Electr贸nica.
                        </div>
                    </div>
                </div>
                
                <div class="error-message" id="error-24">
                    Hay campos obligatorios incompletos. Por favor, compl茅talos.
                </div>
                
                <div class="form-navigation">
                    <button type="button" class="btn-nav btn-secondary" onclick="previousSlide()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        ANTERIOR
                    </button>
                    <button type="button" class="btn-nav btn-primary" onclick="submitForm()">
                        ENVIAR SOLICITUD
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script>
        // Initialize EmailJS with your public key
        const EMAILJS_PUBLIC_KEY = "-avhmJx6qDe7amnuB"; // Reemplaza con tu clave p煤blica de EmailJS
        const EMAILJS_SERVICE_ID = "service_vunkhec";
        const EMAILJS_TEMPLATE_ID = "template_jxc0fi4";
        
        (function(){
            emailjs.init(EMAILJS_PUBLIC_KEY);
        })();

        let currentSlideIndex = 0;
        const totalSlides = 24;
        const formData = {};

        // Form Navigation Functions

        function selectYesNo(button, inputName) {
            // Remove selected class from all buttons in the same group
            const parentButtons = button.parentElement.querySelectorAll('.btn-choice');
            parentButtons.forEach(btn => btn.classList.remove('selected'));
            
            // Add selected class to clicked button
            button.classList.add('selected');
            
            // Set the hidden input value
            document.getElementById(inputName).value = button.dataset.value;
        }

        function toggleCheckbox(checkboxItem, checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            const noneCheckbox = document.getElementById('noneAbove');
            
            // If clicking "NONE OF THE ABOVE"
            if (checkboxId === 'noneAbove') {
                if (!checkbox.checked) {
                    // Uncheck all other checkboxes
                    document.querySelectorAll('input[name="mortgageHistory"]:not(#noneAbove)').forEach(cb => {
                        cb.checked = false;
                        cb.closest('.checkbox-item').classList.remove('selected');
                    });
                }
            } else {
                // If clicking any other option, uncheck "NONE OF THE ABOVE"
                if (noneCheckbox && noneCheckbox.checked) {
                    noneCheckbox.checked = false;
                    noneCheckbox.closest('.checkbox-item').classList.remove('selected');
                }
            }
            
            // Toggle the clicked checkbox
            checkbox.checked = !checkbox.checked;
            checkboxItem.classList.toggle('selected', checkbox.checked);
        }

        function startForm() {
            showSlide(1);
        }

        function showSlide(slideNumber) {
            // Hide all slides
            const slides = document.querySelectorAll('.form-slide');
            slides.forEach(slide => slide.classList.remove('active'));

            // Show current slide
            const currentSlide = document.getElementById(`slide-${slideNumber === 0 ? 'start' : slideNumber}`);
            if (currentSlide) {
                currentSlide.classList.add('active');
            }

            // Update progress
            updateProgress(slideNumber);
            
            currentSlideIndex = slideNumber;
        }

        function nextSlide() {
            // Validate current slide
            if (!validateCurrentSlide()) {
                return;
            }

            // Save current slide data
            saveCurrentSlideData();

            // Move to next slide
            if (currentSlideIndex < totalSlides) {
                showSlide(currentSlideIndex + 1);
            } else {
                // Submit form
                submitForm();
            }
        }

        function previousSlide() {
            if (currentSlideIndex > 1) {
                showSlide(currentSlideIndex - 1);
            } else {
                showSlide(0); // Back to start
            }
        }

        // Signature Pad functionality
        let canvas, ctx, isDrawing = false, signatureData = '';

        function initSignaturePad() {
            canvas = document.getElementById('signaturePad');
            if (!canvas) return;
            
            ctx = canvas.getContext('2d');
            
            // Set canvas size to match display size
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * window.devicePixelRatio;
            canvas.height = rect.height * window.devicePixelRatio;
            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
            
            // Set drawing styles
            ctx.strokeStyle = '#1E4E8C';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            // Mouse events
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
            
            function startDrawing(e) {
                isDrawing = true;
                const pos = getEventPos(e);
                ctx.beginPath();
                ctx.moveTo(pos.x, pos.y);
            }
            
            function draw(e) {
                if (!isDrawing) return;
                const pos = getEventPos(e);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
            }
            
            function stopDrawing() {
                if (isDrawing) {
                    isDrawing = false;
                    signatureData = canvas.toDataURL();
                }
            }
            
            function handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                    e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }
            
            function getEventPos(e) {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: e.clientX - rect.left,
                    y: e.clientY - rect.top
                };
            }
        }

        function clearSignature() {
            if (ctx) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                signatureData = '';
            }
        }

        function validateCurrentSlide() {
            const currentSlide = document.getElementById(`slide-${currentSlideIndex}`);
            if (!currentSlide) return true;

            const requiredInputs = currentSlide.querySelectorAll('input[required], select[required]');
            const errorMessage = document.getElementById(`error-${currentSlideIndex}`);
            let isValid = true;

            // Hide error message first
            if (errorMessage) {
                errorMessage.classList.remove('show');
            }

            requiredInputs.forEach(input => {
                if (input.type === 'hidden') {
                    // For hidden inputs (yes/no buttons), check if they have a value
                    if (!input.value) {
                        isValid = false;
                    }
                } else if (!input.value.trim()) {
                    input.style.borderColor = '#dc3545';
                    isValid = false;
                } else {
                    input.style.borderColor = '#e1e5e9';
                }
            });

            // Special validation for checkbox groups
            if (currentSlideIndex === 10) {
                const checkboxes = currentSlide.querySelectorAll('input[name="mortgageHistory"]');
                const hasSelection = Array.from(checkboxes).some(cb => cb.checked);
                if (!hasSelection) {
                    isValid = false;
                }
            }

            // Special validation for signature on slide 24
            if (currentSlideIndex === 24) {
                if (!signatureData || signatureData === '') {
                    isValid = false;
                    if (canvas) {
                        canvas.style.borderColor = '#dc3545';
                    }
                } else {
                    if (canvas) {
                        canvas.style.borderColor = '#e1e5e9';
                    }
                }
            }

            if (!isValid && errorMessage) {
                // Show error message
                setTimeout(() => {
                    errorMessage.classList.add('show');
                }, 100);
            }

            return isValid;
        }

        function saveCurrentSlideData() {
            const currentSlide = document.getElementById(`slide-${currentSlideIndex}`);
            if (!currentSlide) return;

            const inputs = currentSlide.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.type === 'checkbox') {
                    if (!formData.mortgageHistory) formData.mortgageHistory = [];
                    if (input.checked && !formData.mortgageHistory.includes(input.value)) {
                        formData.mortgageHistory.push(input.value);
                    } else if (!input.checked) {
                        const index = formData.mortgageHistory.indexOf(input.value);
                        if (index > -1) {
                            formData.mortgageHistory.splice(index, 1);
                        }
                    }
                } else {
                    formData[input.name] = input.value;
                }
            });
        }

        function updateProgress(slideNumber) {
            const dots = document.querySelectorAll('.progress-dot');
            
            dots.forEach((dot, index) => {
                dot.classList.remove('active');
                if (index < slideNumber) {
                    dot.classList.add('completed');
                } else if (index === slideNumber) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('completed');
                }
            });
        }

        function submitForm() {
            // Final validation
            if (!validateCurrentSlide()) {
                return;
            }

            // Save current slide data
            saveCurrentSlideData();

            // Add signature to form data
            if (signatureData) {
                formData.signature = signatureData;
            }

            // Add current date
            const currentDate = new Date().toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            // Collect all form data for EmailJS
            const allFormData = getAllFormData();

            // Prepare email template parameters with all collected data
            const templateParams = {
                // Informaci贸n b谩sica
                borrower_name: allFormData.borrowerName || '',
                mobile_phone: allFormData.mobilePhone || '',
                email_address: allFormData.emailAddress || '',
                date_of_birth: allFormData.dateOfBirth || '',
                social_security: allFormData.socialSecurity || '',
                marital_status: allFormData.maritalStatus || '',
                dependents: allFormData.dependents || '',
                
                // Informaci贸n del pr茅stamo
                who_applying: allFormData.whoApplying || '',
                property_description: allFormData.propertyDescription || '',
                loan_purpose: allFormData.loanPurpose || '',
                loan_amount: allFormData.loanAmount || '',
                
                // Direcci贸n
                street_address: allFormData.streetAddress || '',
                street_address2: allFormData.streetAddress2 || '',
                city: allFormData.city || '',
                state_province: allFormData.stateProvince || '',
                postal_code: allFormData.postalCode || '',
                lived_two_years: allFormData.livedTwoYears || '',
                
                // Historial hipotecario
                mortgage_history: Array.isArray(allFormData.mortgageHistory) ? 
                    allFormData.mortgageHistory.join(', ') : (allFormData.mortgageHistory || ''),
                
                // Empleo e ingresos
                is_retired: allFormData.isRetired || '',
                income_source: allFormData.incomeSource || '',
                social_security_income: allFormData.socialSecurityIncome || '0',
                disability_income: allFormData.disabilityIncome || '0',
                annuities_pensions: allFormData.annuitiesPensions || '0',
                third_party_income: allFormData.thirdPartyIncome || '0',
                
                // Co-solicitante
                co_borrower: allFormData.coBorrower || '',
                
                // Informaci贸n legal
                us_citizen: allFormData.usCitizen || '',
                outstanding_judgements: allFormData.outstandingJudgements || '',
                active_lawsuit: allFormData.activeLawsuit || '',
                irs_tax_lien: allFormData.irsTaxLien || '',
                deferred_student_loans: allFormData.deferredStudentLoans || '',
                
                // Marketing
                hear_about_us: allFormData.hearAboutUs || '',
                
                // Autorizaciones
                credit_authorization: allFormData.creditAuthorization || '',
                patriot_act: allFormData.patriotAct || '',
                electronic_disclosure: allFormData.electronicDisclosure || '',
                final_acknowledgement: allFormData.finalAcknowledgement || '',
                
                // Firma y metadatos
                signature: signatureData || '',
                submission_date: currentDate,
                form_data: JSON.stringify(allFormData, null, 2)
            };

            // Show loading message
            showLoadingMessage();

            // Send email using EmailJS
            emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    showSuccessMessage();
                }, function(error) {
                    console.log('FAILED...', error);
                    showErrorMessage();
                });
        }

        function getAllFormData() {
            // Get all form inputs from all slides
            const allInputs = document.querySelectorAll('input, select, textarea');
            const completeFormData = {};
            
            allInputs.forEach(input => {
                if (input.name && input.name !== '') {
                    if (input.type === 'checkbox') {
                        if (!completeFormData[input.name]) {
                            completeFormData[input.name] = [];
                        }
                        if (input.checked) {
                            completeFormData[input.name].push(input.value);
                        }
                    } else if (input.type === 'radio') {
                        if (input.checked) {
                            completeFormData[input.name] = input.value;
                        }
                    } else {
                        completeFormData[input.name] = input.value;
                    }
                }
            });

            // Special handling for mortgage history checkboxes
            const mortgageCheckboxes = document.querySelectorAll('input[name="mortgageHistory"]');
            const selectedMortgageHistory = [];
            mortgageCheckboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    selectedMortgageHistory.push(checkbox.value);
                }
            });
            if (selectedMortgageHistory.length > 0) {
                completeFormData.mortgageHistory = selectedMortgageHistory;
            }

            return completeFormData;
        }

        function showLoadingMessage() {
            const container = document.querySelector('.pre-approval-container');
            container.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; text-align: center; color: white; padding: 2rem;">
                    <div>
                        <div style="font-size: 4rem; margin-bottom: 2rem; animation: spin 2s linear infinite;"></div>
                        <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">Enviando Aplicaci贸n...</h1>
                        <p style="font-size: 1.2rem; opacity: 0.9;">
                            Por favor espere mientras procesamos su informaci贸n.
                        </p>
                    </div>
                </div>
                <style>
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                </style>
            `;
        }

        function showErrorMessage() {
            const container = document.querySelector('.pre-approval-container');
            container.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; text-align: center; color: white; padding: 2rem;">
                    <div>
                        <div style="font-size: 4rem; margin-bottom: 2rem;"></div>
                        <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">Error al Enviar</h1>
                        <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">
                            Hubo un problema enviando su aplicaci贸n. Por favor, int茅ntelo de nuevo.
                        </p>
                        <button onclick="location.reload()" style="display: inline-block; padding: 1rem 2rem; background: white; color: #1E4E8C; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                            Intentar de Nuevo
                        </button>
                    </div>
                </div>
            `;
        }

        function showSuccessMessage() {
            const container = document.querySelector('.pre-approval-container');
            container.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; text-align: center; color: white; padding: 2rem;">
                    <div>
                        <div style="font-size: 4rem; margin-bottom: 2rem;"></div>
                        <h1 style="font-size: 2.5rem; margin-bottom: 1rem;">隆Aplicaci贸n Enviada Exitosamente!</h1>
                        <p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">
                            Gracias por su aplicaci贸n. Sonia Crespo revisar谩 su informaci贸n y se contactar谩 con usted dentro de 24 horas.
                        </p>
                        <a href="index.html" style="display: inline-block; padding: 1rem 2rem; background: white; color: #1E4E8C; text-decoration: none; border-radius: 10px; font-weight: 600; transition: all 0.3s ease;">
                            Regresar al Inicio
                        </a>
                    </div>
                </div>
            `;
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize signature pad when slide 24 is shown
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const slide24 = document.getElementById('slide-24');
                        if (slide24 && slide24.classList.contains('active')) {
                            setTimeout(initSignaturePad, 100);
                        }
                    }
                });
            });
            
            const slide24 = document.getElementById('slide-24');
            if (slide24) {
                observer.observe(slide24, { attributes: true });
            }
            
            // Format SSN input
            const ssnInput = document.getElementById('socialSecurity');
            if (ssnInput) {
                ssnInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    if (value.length >= 6) {
                        value = value.substring(0, 3) + '-' + value.substring(3, 5) + '-' + value.substring(5, 9);
                    } else if (value.length >= 3) {
                        value = value.substring(0, 3) + '-' + value.substring(3, 5);
                    }
                    e.target.value = value;
                });
            }
        });
    </script>
</body>
</html>
